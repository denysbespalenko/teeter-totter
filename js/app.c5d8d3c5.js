(function(){"use strict";var e={389:function(e,t,o){var i=o(144),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("main",[o("Header"),o("GameSection")],1)},s=[],r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("UIContainer",{attrs:{tag:"header",bg_color:e.headerColor}},[e.isGameOver?o("UIButton",{nativeOn:{click:function(t){return e.startTheGame.apply(null,arguments)}}},[e._v(" Start new game ")]):e._e(),e.isGameOver?e._e():o("UIButton",{attrs:{bg_color:e.isPaused?"success":"error"},nativeOn:{click:function(t){return e.togglePause.apply(null,arguments)}}},[e._v(" "+e._s(e.isPaused?"Start":"Pause")+" ")]),o("Score")],1)},l=[],a=o(629);const u="#FFF",c="#A6ACCD",d="#89DDFF",f="#C792EA",h="#f5f5f5",p="#009688",g="#ff5252",m="#000",x="#FFF",S="#37474f",b=[c,d,f];var B,v,_={name:"UIContainer",props:{tag:{type:String,default:"section"},bg_color:{type:String,default:u}},computed:{cssProps(){return{"background-color":this.bg_color}}},render(e){return e(this.tag,{class:"ui-container ",style:this.cssProps,attrs:{id:this.$parent.$options._componentTag}},this.$slots.default)}},C=_,y=o(1),F=(0,y.Z)(C,B,v,!1,null,"5f197877",null),P=F.exports,w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("button",{staticClass:"ui-button",style:e.cssPropsButton},[o("span",{style:e.cssPropsText},[e._t("default")],2),o("span",[e._t("icon")],2)])},L=[];const $=["success","error"];var T={name:"UIButton",props:{bg_color:{type:String,default:h},text_color:{type:String,default:m}},methods:{compareValues(e,t=$){return Array.isArray(t)||(t=[t]),t.some((t=>t===e))}},computed:{cssPropsButton(){const{bg_color:e}=this;return{"background-color":this.compareValues(e,"success")?p:this.compareValues(e,"error")?g:e}},cssPropsText(){return{color:this.compareValues(this.bg_color)?x:this.text_color}}}},O=T,I=(0,y.Z)(O,w,L,!1,null,"5b454d57",null),k=I.exports,U=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"score"},[o("div",{staticClass:"score-item"},[o("p",[e._v(" Score: "),o("span",[e._v(e._s(e.leftSideBoxes.length))])])]),o("div",{staticClass:"score-item"},[o("p",[e._v(" Left side weight: "),o("span",[e._v(e._s(e.leftSideWeight))])])]),o("div",{staticClass:"score-item"},[o("p",[e._v(" Right side weight: "),o("span",[e._v(e._s(e.rightSideWeight))])])])])},G=[],Z={name:"Score",computed:{...(0,a.Se)(["leftSideWeight","rightSideWeight"]),...(0,a.rn)(["leftSideBoxes"])}},D=Z,E=(0,y.Z)(D,U,G,!1,null,null,null),A=E.exports,R={name:"Header",data(){return{headerColor:S}},components:{UIContainer:P,UIButton:k,Score:A},methods:{...(0,a.OI)(["togglePause"]),...(0,a.nv)(["startTheGame"])},computed:{...(0,a.rn)(["isPaused"]),...(0,a.Se)(["isGameOver"])}},W=R,M=(0,y.Z)(W,r,l,!1,null,"25efb461",null),j=M.exports,H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("UIContainer",[o("BoxesSection"),o("SwingSection")],1)},q=[],N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"boxes-section"},[e._l(e.leftSideFallingBoxes,(function(e,t){return o("FallingBox",{key:e.id,attrs:{box:e,isLeft:!0,itemIndex:t}})})),e._l(e.rightSideFallingBoxes,(function(e,t){return o("FallingBox",{key:e.id,attrs:{box:e,isLeft:!1,itemIndex:t}})}))],2)},V=[],z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Box",{ref:"box",attrs:{box:e.box,top:e.top,isLeft:e.isLeft,isPaused:e.isPaused}})},J=[];const K=["triangle","circle","rectangle"],Q=10,X=1,Y=2,ee=20,te=10,oe=30,ie=-30,ne=200,se=10,re=5;function le(){return document.querySelector(".crossbar").getBoundingClientRect()}var ae=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box",class:e.propsClassName,style:e.propsStyles},[e._v(" "+e._s(e.box.weight)+" ")])},ue=[],ce={name:"Box",props:{box:{type:Object,require:!0},top:{type:Number,default:0},isLeft:{type:Boolean,default:!0}},computed:{...(0,a.rn)(["timeoutDuration"]),propsClassName(){const{type:e}=this.box;return`box-${K[e]}`},offsetPosition(){const{offset:e}=this.box;return this.isLeft?{left:50-10*e+"%"}:{left:50+10*e+"%"}},propsStyles(){const{type:e,size:t}=this.box;let o={};return o=0===e?{borderWidth:`0 ${t}px ${t}px ${t/3}px`,lineHeight:`${t}px`,borderColor:`transparent transparent ${b[e]} transparent`}:{height:`${t}px`,width:`${t}px`,lineHeight:`${t}px`,backgroundColor:b[e]},{transition:`${this.timeoutDuration}ms`,top:`${this.top}px`,...this.offsetPosition,...o}}}},de=ce,fe=(0,y.Z)(de,ae,ue,!1,null,"cbae11be",null),he=fe.exports,pe={name:"FallingBox",components:{Box:he},props:{box:{type:Object,required:!0},itemIndex:{type:Number,required:!0},isLeft:{type:Boolean,default:!0}},data(){return{timerId:null,top:this.box.size,bottom:null,animationStep:30}},computed:{...(0,a.rn)(["isPaused","isLeftTurn","timeoutDuration"]),...(0,a.Se)(["rotationAngle"])},methods:{...(0,a.nv)(["newBoxesCircle"]),...(0,a.OI)(["decreaseTimeoutDuration"]),blockBottomPosition(){const{top:e,bottom:t}=le(),{offset:o}=this.box;return this.rotationAngle>=0?e+(t-e)/2*(1-o/(te/2)):t-(t-e)/2*(1-o/(te/2))},controlledFalling(){this.bottom=this.$refs.box.$el.getBoundingClientRect().bottom,this.timerId=setTimeout((()=>{this.bottom>=this.blockBottomPosition()-this.animationStep&&(this.newBoxesCircle(),this.decreaseTimeoutDuration(),clearInterval(this.timerId)),this.top+=this.animationStep}),this.timeoutDuration)},unControlledFalling(){this.bottom=this.$refs.box.$el.getBoundingClientRect().bottom,this.top=this.blockBottomPosition(),this.newBoxesCircle()},boxUpdated(){if(this.isPaused)return clearInterval(this.timerId);0===this.itemIndex&&(this.isLeft&&this.isLeftTurn?this.controlledFalling():this.isLeft||this.isLeftTurn||this.unControlledFalling())}},watch:{isLeftTurn:{handler(){this.boxUpdated()},deep:!0},itemIndex:{handler(){this.boxUpdated()},deep:!0}},updated(){this.boxUpdated()}},ge=pe,me=(0,y.Z)(ge,z,J,!1,null,null,null),xe=me.exports,Se={name:"BoxesSection",components:{FallingBox:xe},computed:{...(0,a.rn)(["leftSideFallingBoxes","rightSideFallingBoxes"])},methods:{...(0,a.OI)(["slideLeft","slideRight"]),moveBox(e){37===e.keyCode&&this.slideLeft(),39===e.keyCode&&this.slideRight()}},beforeMount(){window.addEventListener("keydown",this.moveBox)},beforeDestroy(){window.removeEventListener("keydown",this.moveBox)}},be=Se,Be=(0,y.Z)(be,N,V,!1,null,"633dc229",null),ve=Be.exports,_e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"swing-section"},[o("Crossbar"),o("CrossbarPillar")],1)},Ce=[],ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"crossbar",class:e.animateClass?"crossbar-gameover":"",style:e.cssSyles},[e._l(e.leftSideBoxes,(function(e){return o("Box",{key:e.id,attrs:{box:e}})})),e._l(e.rightSideBoxes,(function(e){return o("Box",{key:e.id,attrs:{box:e,isLeft:!1}})}))],2)},Fe=[],Pe={name:"Crossbar",components:{Box:he},computed:{...(0,a.Se)(["rotationAngle","isGameOver","isGameStarted"]),...(0,a.rn)(["leftSideBoxes","rightSideBoxes"]),cssSyles(){return{transform:`rotate(${this.rotationAngle/2}deg)`,background:S}},animateClass(){return this.isGameOver&&this.isGameStarted}}},we=Pe,Le=(0,y.Z)(we,ye,Fe,!1,null,null,null),$e=Le.exports,Te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"crossbar-pillar"})},Oe=[],Ie={},ke=(0,y.Z)(Ie,Te,Oe,!1,null,null,null),Ue=ke.exports,Ge={name:"SwingSection",components:{Crossbar:$e,CrossbarPillar:Ue}},Ze=Ge,De=(0,y.Z)(Ze,_e,Ce,!1,null,"07c51cbc",null),Ee=De.exports,Ae={name:"GameSection",components:{UIContainer:P,BoxesSection:ve,SwingSection:Ee}},Re=Ae,We=(0,y.Z)(Re,H,q,!1,null,"5d2cf9d7",null),Me=We.exports,je={name:"App",components:{Header:j,GameSection:Me}},He=je,qe=(0,y.Z)(He,n,s,!1,null,null,null),Ne=qe.exports,Ve={isPaused:!0,isLeftTurn:!0,leftSideBoxes:[],rightSideBoxes:[],leftSideFallingBoxes:[],rightSideFallingBoxes:[],timeoutDuration:ne,currentLevelUpCount:0},ze={leftSideWeight(e){return e.leftSideBoxes.reduce(((e,t)=>e+t.weight*t.offset),0)},rightSideWeight(e){return e.rightSideBoxes.reduce(((e,t)=>e+t.weight*t.offset),0)},rotationAngle(e,t){const{rightSideWeight:o,leftSideWeight:i}=t;if(!i||i===o)return 0;const n=Math.max(o,i);return(o-i)/n*100},isGameStarted(e,t){const{rightSideWeight:o}=t;return Boolean(o)},isGameOver(e,t){const{rightSideWeight:o,leftSideWeight:i,rotationAngle:n,isGameStarted:s}=t;return!s||n>=oe||n<=ie||Math.abs(i-o)>=ee&&0!==i}},Je=()=>{const e=Date.now()+Math.random(),t=Math.floor(Math.random()*K.length),o=Math.floor(Math.random()*Q)+X,i=Math.floor(Math.random()*te/2)+1,n=12*o;return{id:e,type:t,weight:o,offset:i,size:n}},Ke={togglePause(e){e.isPaused=!e.isPaused},toggleTurn(e){e.isLeftTurn=!e.isLeftTurn},addLeftSideFallingBox(e){const t=Je();e.leftSideFallingBoxes.push(t)},addRightSideFallingBox(e){const t=Je();e.rightSideFallingBoxes.push(t)},pushBoxToLeftSide(e){const t=e.leftSideFallingBoxes.shift();e.leftSideBoxes.push(t)},pushBoxToRightSide(e){const t=e.rightSideFallingBoxes.shift();e.rightSideBoxes.push(t)},initBoxes(e){for(let t=0;t<Y;t++){const t=Je(),o=Je();e.leftSideFallingBoxes.push(t),e.rightSideFallingBoxes.push(o)}},slideLeft(e){e.isPaused||e.leftSideFallingBoxes[0].offset>=5||(e.leftSideFallingBoxes[0].offset+=1)},slideRight(e){e.isPaused||e.leftSideFallingBoxes[0].offset<=1||(e.leftSideFallingBoxes[0].offset-=1)},decreaseTimeoutDuration(e){e.currentLevelUpCount+=1,e.currentLevelUpCount>=re&&(e.currentLevelUpCount=0,e.timeoutDuration-=se)},resetState(e){e.isPaused=!0,e.isLeftTurn=!0,e.leftSideBoxes=[],e.rightSideBoxes=[],e.leftSideFallingBoxes=[],e.rightSideFallingBoxes=[],e.timeoutDuration=ne,e.currentLevelUpCount=0,e.currentRotationAngle=0}},Qe={newBoxesCircle({commit:e,state:t,getters:o}){t.isLeftTurn&&(e("pushBoxToLeftSide"),e("addLeftSideFallingBox")),t.leftSideBoxes.length>t.rightSideBoxes.length&&(e("toggleTurn"),e("addRightSideFallingBox"),e("pushBoxToRightSide"),e("toggleTurn")),o.isGameOver&&e("togglePause")},startTheGame({commit:e}){e("resetState"),e("initBoxes"),e("pushBoxToRightSide")}};i.Z.use(a.ZP);var Xe=new a.ZP.Store({state:Ve,getters:ze,mutations:Ke,actions:Qe});i.Z.config.productionTip=!1,new i.Z({store:Xe,render:e=>e(Ne)}).$mount("#app")}},t={};function o(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,i,n,s){if(!i){var r=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],s=e[c][2];for(var l=!0,a=0;a<i.length;a++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](i[a])}))?i.splice(a--,1):(l=!1,s<r&&(r=s));if(l){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[i,n,s]}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,s,r=i[0],l=i[1],a=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(a)var c=a(o)}for(t&&t(i);u<r.length;u++)s=r[u],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},i=self["webpackChunkteeter_totter"]=self["webpackChunkteeter_totter"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(389)}));i=o.O(i)})();
//# sourceMappingURL=app.c5d8d3c5.js.map